Version 4
SHEET 1 2408 940
WIRE 704 -176 704 -192
WIRE -800 -160 -800 -192
WIRE 160 -160 -528 -160
WIRE 320 -160 240 -160
WIRE 672 -160 320 -160
WIRE 816 -144 736 -144
WIRE 848 -144 816 -144
WIRE 320 -128 320 -160
WIRE 672 -128 544 -128
WIRE 704 -96 704 -112
WIRE -528 -80 -528 -160
WIRE 1040 -80 1008 -80
WIRE 1376 -80 1120 -80
WIRE -800 -64 -800 -80
WIRE -800 -64 -880 -64
WIRE -800 -48 -800 -64
WIRE -880 -16 -880 -64
WIRE 320 -16 320 -48
WIRE -528 32 -528 0
WIRE 544 32 544 -128
WIRE 608 32 544 32
WIRE 816 32 816 -144
WIRE 816 32 688 32
WIRE -800 64 -800 32
WIRE 816 176 816 32
WIRE 896 176 816 176
WIRE 1008 176 1008 -80
WIRE 1008 176 976 176
WIRE 1040 176 1008 176
WIRE 1248 192 1104 192
WIRE 1376 192 1376 -80
WIRE 1376 192 1312 192
WIRE 1504 192 1376 192
WIRE 1040 208 1008 208
WIRE 1376 240 1376 192
WIRE 1008 256 1008 208
WIRE 1376 352 1376 304
WIRE 544 416 544 32
WIRE 544 416 256 416
WIRE 256 512 256 416
WIRE 656 560 592 560
WIRE 1504 560 1504 192
WIRE 1504 560 656 560
WIRE -816 592 -816 496
WIRE 656 640 656 560
WIRE -608 656 -768 656
WIRE -816 720 -816 688
WIRE 256 752 256 592
WIRE 544 752 544 592
WIRE 544 752 256 752
WIRE 656 752 656 720
WIRE 656 752 544 752
WIRE -608 768 -608 736
WIRE 544 816 544 752
FLAG -880 -16 0
FLAG -800 -192 Vdd
FLAG 704 -96 Vdd
FLAG 704 -192 Vss
FLAG -800 64 Vss
FLAG -528 32 0
FLAG 848 -144 out
FLAG -528 -160 in
FLAG -816 720 0
FLAG -816 496 Vdd
FLAG -608 768 0
FLAG 1072 224 Vss
FLAG 1072 160 Vdd
FLAG 1376 352 Vss
FLAG 544 816 0
FLAG -528 -272 0
FLAG 320 -16 0
FLAG 1008 256 0
SYMBOL voltage -800 -176 R0
SYMATTR InstName V1
SYMATTR Value 3.3
SYMBOL voltage -800 -64 R0
SYMATTR InstName V2
SYMATTR Value 3.3
SYMBOL res 704 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 50k
SYMBOL njf -768 592 M0
SYMATTR InstName J1
SYMATTR Value BF245B
SYMBOL voltage -608 640 R0
SYMATTR InstName V4
SYMATTR Value 0
SYMBOL Opamps\\opamp2 704 -80 M180
SYMATTR InstName U1
SYMATTR Value LM324
SYMBOL Opamps\\opamp2 1072 128 R0
SYMATTR InstName U3
SYMATTR Value LM324
SYMBOL diode 1312 176 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL cap 1360 240 R0
SYMATTR InstName C1
SYMATTR Value 22µ
SYMBOL njf 592 496 M0
SYMATTR InstName J2
SYMATTR Value BF245B
SYMBOL res 240 496 R0
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL res 640 624 R0
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL bv -528 -96 R0
SYMATTR InstName B1
SYMATTR Value V=sinc(mod(time,pi/4.7)*100-8*pi)
SYMBOL voltage -528 -368 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value SINE(0 1 1.5)
SYMBOL res 256 -176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 336 -32 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res 992 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL res 1136 -96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 2k
TEXT -872 232 Left 2 !;dc V4 -0.5 -1.95 1m
TEXT -872 192 Left 2 !.lib opamp.lib
TEXT -872 272 Left 2 !.lib BF245.lib
TEXT -872 304 Left 2 !.tran 5
TEXT -872 344 Left 2 !.function sinc(x) { 2*A*sin(x)/x }
TEXT -872 384 Left 2 !.function mod(x,y) { (x/y)-int(x/y) }
TEXT -864 152 Left 2 !.param A=1000m
